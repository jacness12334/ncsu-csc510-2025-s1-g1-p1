name: ğŸ¨ Style Checks

# Controls when the action will run.
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

jobs:
  style_checks:
    runs-on: ubuntu-latest
    
    steps:
    - name: â¬‡ï¸ Checkout Repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    # --- 1. Prettier Formatting Check (Markdown, JSON, YAML, etc.) ---
    # We will use the direct Node.js setup, which is cleaner without a .pre-commit-config.yaml.
    
    - name: âš™ï¸ Setup Node.js for Prettier
      # This line must be correctly indented under 'steps:'
      uses: actions/setup-node@v4
      with:
        node-version: '20'

    - name: ğŸ“¥ Install Prettier
      run: npm install --global prettier

    - name: ğŸ” Prettier Check on Configuration and Documentation
      # This step ensures all files covered by .prettierrc.json conform.
      run: |
        prettier --check .

    # --- 2. YAML Linting (for CI/CD, Yaml Configuration) ---
    - name: ğŸ“œ Run Yamllint
      uses: ibi/yamllint-action@v1.0.0
      with:
        # **CORRECTED LINE 31 AREA:** This structure is now correct.
        config_file: .yamllint.yaml
        files: |
          .github/workflows
          *.yml
          *.yaml

    # --- 3. Dockerfile Linting (Hadolint) ---
    - name: ğŸ³ Run Hadolint (Dockerfile Linter)
      uses: reviewdog/action-hadolint@v1
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        dockerfile-path: ./Dockerfile
