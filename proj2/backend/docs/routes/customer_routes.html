<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>routes.customer_routes API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>routes.customer_routes</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="routes.customer_routes.add_funds"><code class="name flex">
<span>def <span class="ident">add_funds</span></span>(<span>payment_method_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/payment-methods/&lt;int:payment_method_id&gt;/add-funds&#39;, methods=[&#39;POST&#39;])
def add_funds(payment_method_id):
    &#34;&#34;&#34;
    Add Funds to Payment Method
    ---
    tags: [Payment Methods]
    description: Adds funds to a payment method balance (e.g., loyalty card or store credit).
    parameters:
      - in: path
        name: payment_method_id
        type: integer
        required: true
        description: The ID of the payment method.
      - in: body
        name: fund_amount
        schema: {$ref: &#39;#/definitions/FundAddition&#39;}
    responses:
      200:
        description: Funds added successfully
        schema:
          type: object
          properties:
            message: {type: string}
            new_balance: {type: number, format: float}
      400: {description: Invalid amount or payment method}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        amount = data.get(&#39;amount&#39;)
        
        payment_method = customer_service.add_funds_to_payment_method(payment_method_id, amount)
        return jsonify({
            &#39;message&#39;: &#39;Funds added successfully&#39;,
            &#39;new_balance&#39;: float(payment_method.balance)
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="add-funds-to-payment-method">Add Funds To Payment Method</h2>
<p>tags: [Payment Methods]
description: Adds funds to a payment method balance (e.g., loyalty card or store credit).
parameters:
- in: path
name: payment_method_id
type: integer
required: true
description: The ID of the payment method.
- in: body
name: fund_amount
schema: {$ref: '#/definitions/FundAddition'}
responses:
200:
description: Funds added successfully
schema:
type: object
properties:
message: {type: string}
new_balance: {type: number, format: float}
400: {description: Invalid amount or payment method}</p></div>
</dd>
<dt id="routes.customer_routes.add_payment_method"><code class="name flex">
<span>def <span class="ident">add_payment_method</span></span>(<span>user_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:user_id&gt;/payment-methods&#39;, methods=[&#39;POST&#39;])
def add_payment_method(user_id):
    &#34;&#34;&#34;
    Add Payment Method
    ---
    tags: [Payment Methods]
    description: Adds a new credit/debit or loyalty card payment method for a customer.
    parameters:
      - in: path
        name: user_id
        type: integer
        required: true
        description: The ID of the customer user.
      - in: body
        name: payment_method_details
        schema: {$ref: &#39;#/definitions/PaymentMethodCreate&#39;}
    responses:
      201:
        description: Payment method added
        schema:
          type: object
          properties:
            message: {type: string}
            payment_method_id: {type: integer}
      400: {description: Invalid input}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        payment_method = customer_service.add_payment_method(
            user_id=user_id,
            card_number=data.get(&#39;card_number&#39;),
            expiration_month=data.get(&#39;expiration_month&#39;),
            expiration_year=data.get(&#39;expiration_year&#39;),
            billing_address=data.get(&#39;billing_address&#39;),
            balance=data.get(&#39;balance&#39;, 0.00),
            is_default=data.get(&#39;is_default&#39;, False)
        )
        return jsonify({
            &#39;message&#39;: &#39;Payment method added&#39;,
            &#39;payment_method_id&#39;: payment_method.id
        }), 201
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: &#39;An error occurred: &#39; + str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="add-payment-method">Add Payment Method</h2>
<p>tags: [Payment Methods]
description: Adds a new credit/debit or loyalty card payment method for a customer.
parameters:
- in: path
name: user_id
type: integer
required: true
description: The ID of the customer user.
- in: body
name: payment_method_details
schema: {$ref: '#/definitions/PaymentMethodCreate'}
responses:
201:
description: Payment method added
schema:
type: object
properties:
message: {type: string}
payment_method_id: {type: integer}
400: {description: Invalid input}</p></div>
</dd>
<dt id="routes.customer_routes.add_to_cart"><code class="name flex">
<span>def <span class="ident">add_to_cart</span></span>(<span>customer_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:customer_id&gt;/cart&#39;, methods=[&#39;POST&#39;])
def add_to_cart(customer_id):
    &#34;&#34;&#34;
    Add Item to Cart
    ---
    tags: [Shopping Cart]
    description: Adds a product item to the customer&#39;s shopping cart.
    parameters:
      - in: path
        name: customer_id
        type: integer
        required: true
        description: The ID of the customer user.
      - in: body
        name: cart_item
        schema: {$ref: &#39;#/definitions/CartItemCreate&#39;}
    responses:
      201:
        description: Item added to cart
        schema:
          type: object
          properties:
            message: {type: string}
            cart_item_id: {type: integer}
      400: {description: Invalid product or quantity}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        cart_item = customer_service.create_cart_item(
            customer_id=customer_id,
            product_id=data.get(&#39;product_id&#39;),
            quantity=data.get(&#39;quantity&#39;, 1)
        )
        return jsonify({
            &#39;message&#39;: &#39;Item added to cart&#39;,
            &#39;cart_item_id&#39;: cart_item.id
        }), 201
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="add-item-to-cart">Add Item To Cart</h2>
<p>tags: [Shopping Cart]
description: Adds a product item to the customer's shopping cart.
parameters:
- in: path
name: customer_id
type: integer
required: true
description: The ID of the customer user.
- in: body
name: cart_item
schema: {$ref: '#/definitions/CartItemCreate'}
responses:
201:
description: Item added to cart
schema:
type: object
properties:
message: {type: string}
cart_item_id: {type: integer}
400: {description: Invalid product or quantity}</p></div>
</dd>
<dt id="routes.customer_routes.cancel_delivery"><code class="name flex">
<span>def <span class="ident">cancel_delivery</span></span>(<span>delivery_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/deliveries/&lt;int:delivery_id&gt;/cancel&#39;, methods=[&#39;POST&#39;])
def cancel_delivery(delivery_id):
    &#34;&#34;&#34;
    Cancel Delivery
    ---
    tags: [Delivery Operations (Customer)]
    description: Cancels an existing delivery order.
    parameters:
      - in: path
        name: delivery_id
        type: integer
        required: true
        description: The ID of the delivery to cancel.
    responses:
      200:
        description: Delivery cancelled
        schema:
          type: object
          properties:
            message: {type: string}
            delivery_id: {type: integer}
            delivery_status: {type: string}
      400: {description: Cannot cancel delivery in current status}
      404: {description: Delivery not found}
    &#34;&#34;&#34;
    try:
        delivery = customer_service.cancel_delivery(delivery_id)
        return jsonify({
            &#39;message&#39;: &#39;Delivery cancelled&#39;,
            &#39;delivery_id&#39;: delivery.id,
            &#39;delivery_status&#39;: delivery.delivery_status
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="cancel-delivery">Cancel Delivery</h2>
<p>tags: [Delivery Operations (Customer)]
description: Cancels an existing delivery order.
parameters:
- in: path
name: delivery_id
type: integer
required: true
description: The ID of the delivery to cancel.
responses:
200:
description: Delivery cancelled
schema:
type: object
properties:
message: {type: string}
delivery_id: {type: integer}
delivery_status: {type: string}
400: {description: Cannot cancel delivery in current status}
404: {description: Delivery not found}</p></div>
</dd>
<dt id="routes.customer_routes.create_customer"><code class="name flex">
<span>def <span class="ident">create_customer</span></span>(<span>)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers&#39;, methods=[&#39;POST&#39;])
def create_customer():
    &#34;&#34;&#34;
    Create Customer Account
    ---
    tags: [Customer Management]
    description: Registers a new customer user account.
    parameters:
      - in: body
        name: customer_registration
        schema: {$ref: &#39;#/definitions/CustomerRegistration&#39;}
    responses:
      201:
        description: Customer created successfully
        schema:
          type: object
          properties:
            message: {type: string}
            customer: {$ref: &#39;#/definitions/CustomerProfile&#39;}
      400: {description: Invalid input}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        customer = customer_service.create_customer(
            name=data.get(&#39;name&#39;), 
            email=data.get(&#39;email&#39;),
            phone=data.get(&#39;phone&#39;),
            birthday=data.get(&#39;birthday&#39;),
            password=data.get(&#39;password&#39;),
            role=data.get(&#39;role&#39;, &#39;customer&#39;),
            default_theatre_id=data.get(&#39;default_theatre_id&#39;)
        )
        return jsonify({
            &#39;message&#39;: &#39;Customer created successfully&#39;,
            &#39;customer&#39;: {
                &#39;user_id&#39;: customer.user_id,
                &#39;default_theatre_id&#39;: customer.default_theatre_id
            }
        }), 201
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="create-customer-account">Create Customer Account</h2>
<p>tags: [Customer Management]
description: Registers a new customer user account.
parameters:
- in: body
name: customer_registration
schema: {$ref: '#/definitions/CustomerRegistration'}
responses:
201:
description: Customer created successfully
schema:
type: object
properties:
message: {type: string}
customer: {$ref: '#/definitions/CustomerProfile'}
400: {description: Invalid input}</p></div>
</dd>
<dt id="routes.customer_routes.create_customer_showing"><code class="name flex">
<span>def <span class="ident">create_customer_showing</span></span>(<span>user_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:user_id&gt;/showings&#39;, methods=[&#39;POST&#39;])
def create_customer_showing(user_id):
    &#34;&#34;&#34;
    Book Movie Showing
    ---
    tags: [Movie Booking]
    description: Books a seat for a specific movie showing.
    parameters:
      - in: path
        name: user_id
        type: integer
        required: true
        description: The ID of the customer user.
      - in: body
        name: booking_details
        schema: {$ref: &#39;#/definitions/CustomerShowingCreate&#39;}
    responses:
      201:
        description: Showing booked successfully
        schema:
          type: object
          properties:
            message: {type: string}
            customer_showing_id: {type: integer}
      400: {description: Invalid input or seat already taken}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        customer_showing = customer_service.create_customer_showing(
            user_id=user_id,
            movie_showing_id=data.get(&#39;movie_showing_id&#39;),
            seat_id=data.get(&#39;seat_id&#39;)
        )
        return jsonify({
            &#39;message&#39;: &#39;Showing booked successfully&#39;,
            &#39;customer_showing_id&#39;: customer_showing.id
        }), 201
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="book-movie-showing">Book Movie Showing</h2>
<p>tags: [Movie Booking]
description: Books a seat for a specific movie showing.
parameters:
- in: path
name: user_id
type: integer
required: true
description: The ID of the customer user.
- in: body
name: booking_details
schema: {$ref: '#/definitions/CustomerShowingCreate'}
responses:
201:
description: Showing booked successfully
schema:
type: object
properties:
message: {type: string}
customer_showing_id: {type: integer}
400: {description: Invalid input or seat already taken}</p></div>
</dd>
<dt id="routes.customer_routes.create_delivery"><code class="name flex">
<span>def <span class="ident">create_delivery</span></span>(<span>)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/deliveries&#39;, methods=[&#39;POST&#39;])
def create_delivery():
    &#34;&#34;&#34;
    Create Delivery Order
    ---
    tags: [Delivery Operations (Customer)]
    description: Places a new delivery order based on the current cart items.
    parameters:
      - in: body
        name: delivery_creation
        schema: {$ref: &#39;#/definitions/DeliveryCreate&#39;}
    responses:
      201:
        description: Delivery created successfully
        schema:
          type: object
          properties:
            message: {type: string}
            delivery_id: {type: integer}
            total_price: {type: number, format: float}
            delivery_status: {type: string}
            payment_status: {type: string}
      400: {description: Invalid input, empty cart, or payment failure}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        delivery = customer_service.create_delivery(
            customer_showing_id=data.get(&#39;customer_showing_id&#39;),
            payment_method_id=data.get(&#39;payment_method_id&#39;)
        )
        return jsonify({
            &#39;message&#39;: &#39;Delivery created successfully&#39;,
            &#39;delivery_id&#39;: delivery.id,
            &#39;total_price&#39;: float(delivery.total_price),
            &#39;delivery_status&#39;: delivery.delivery_status,
            &#39;payment_status&#39;: delivery.payment_status
        }), 201
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        import traceback
        traceback.print_exc()
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="create-delivery-order">Create Delivery Order</h2>
<p>tags: [Delivery Operations (Customer)]
description: Places a new delivery order based on the current cart items.
parameters:
- in: body
name: delivery_creation
schema: {$ref: '#/definitions/DeliveryCreate'}
responses:
201:
description: Delivery created successfully
schema:
type: object
properties:
message: {type: string}
delivery_id: {type: integer}
total_price: {type: number, format: float}
delivery_status: {type: string}
payment_status: {type: string}
400: {description: Invalid input, empty cart, or payment failure}</p></div>
</dd>
<dt id="routes.customer_routes.delete_cart_item"><code class="name flex">
<span>def <span class="ident">delete_cart_item</span></span>(<span>cart_item_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/cart/&lt;int:cart_item_id&gt;&#39;, methods=[&#39;DELETE&#39;])
def delete_cart_item(cart_item_id):
    &#34;&#34;&#34;
    Delete Cart Item
    ---
    tags: [Shopping Cart]
    description: Removes a specific item from the cart.
    parameters:
      - in: path
        name: cart_item_id
        type: integer
        required: true
        description: The ID of the cart item to delete.
    responses:
      200:
        description: Cart item deleted
        schema:
          type: object
          properties:
            message: {type: string}
      404: {description: Cart item not found}
    &#34;&#34;&#34;
    try:
        customer_service.delete_cart_item(cart_item_id)
        return jsonify({&#39;message&#39;: &#39;Cart item deleted&#39;}), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 404
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="delete-cart-item">Delete Cart Item</h2>
<p>tags: [Shopping Cart]
description: Removes a specific item from the cart.
parameters:
- in: path
name: cart_item_id
type: integer
required: true
description: The ID of the cart item to delete.
responses:
200:
description: Cart item deleted
schema:
type: object
properties:
message: {type: string}
404: {description: Cart item not found}</p></div>
</dd>
<dt id="routes.customer_routes.delete_customer"><code class="name flex">
<span>def <span class="ident">delete_customer</span></span>(<span>user_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:user_id&gt;&#39;, methods=[&#39;DELETE&#39;])
def delete_customer(user_id):
    &#34;&#34;&#34;
    Delete Customer Account
    ---
    tags: [Customer Management]
    description: Deletes a customer account by user ID.
    parameters:
      - in: path
        name: user_id
        type: integer
        required: true
        description: The ID of the customer user to delete.
    responses:
      200:
        description: Customer deleted successfully
        schema:
          type: object
          properties:
            message: {type: string}
      404: {description: Customer not found}
    &#34;&#34;&#34;
    try:
        customer_service.delete_customer(user_id)
        return jsonify({&#39;message&#39;: &#39;Customer deleted successfully&#39;}), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 404
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="delete-customer-account">Delete Customer Account</h2>
<p>tags: [Customer Management]
description: Deletes a customer account by user ID.
parameters:
- in: path
name: user_id
type: integer
required: true
description: The ID of the customer user to delete.
responses:
200:
description: Customer deleted successfully
schema:
type: object
properties:
message: {type: string}
404: {description: Customer not found}</p></div>
</dd>
<dt id="routes.customer_routes.delete_payment_method"><code class="name flex">
<span>def <span class="ident">delete_payment_method</span></span>(<span>payment_method_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/payment-methods/&lt;int:payment_method_id&gt;&#39;, methods=[&#39;DELETE&#39;])
def delete_payment_method(payment_method_id):
    &#34;&#34;&#34;
    Delete Payment Method
    ---
    tags: [Payment Methods]
    description: Deletes a specific payment method by its ID.
    parameters:
      - in: path
        name: payment_method_id
        type: integer
        required: true
        description: The ID of the payment method to delete.
    responses:
      200:
        description: Payment method deleted
        schema:
          type: object
          properties:
            message: {type: string}
      404: {description: Payment method not found}
    &#34;&#34;&#34;
    try:
        customer_service.delete_payment_method(payment_method_id)
        return jsonify({&#39;message&#39;: &#39;Payment method deleted&#39;}), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 404
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="delete-payment-method">Delete Payment Method</h2>
<p>tags: [Payment Methods]
description: Deletes a specific payment method by its ID.
parameters:
- in: path
name: payment_method_id
type: integer
required: true
description: The ID of the payment method to delete.
responses:
200:
description: Payment method deleted
schema:
type: object
properties:
message: {type: string}
404: {description: Payment method not found}</p></div>
</dd>
<dt id="routes.customer_routes.get_cart"><code class="name flex">
<span>def <span class="ident">get_cart</span></span>(<span>customer_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:customer_id&gt;/cart&#39;, methods=[&#39;GET&#39;])
def get_cart(customer_id):
    &#34;&#34;&#34;
    Get Shopping Cart
    ---
    tags: [Shopping Cart]
    description: Retrieves all items currently in the customer&#39;s shopping cart; returns an empty list if the cart is empty.
    parameters:
      - in: path
        name: customer_id
        type: integer
        required: true
        description: The ID of the customer user.
    responses:
      200:
        description: Cart items retrieved successfully
        schema:
          type: object
          properties:
            items:
              type: array
              items: {$ref: &#39;#/definitions/CartItemDetails&#39;}
    &#34;&#34;&#34;
    try:
        items = customer_service.get_cart_items(customer_id=customer_id) or []
        return jsonify({
            &#39;items&#39;: [{
                &#39;id&#39;: item.id,
                &#39;product_id&#39;: item.product_id,
                &#39;quantity&#39;: item.quantity
            } for item in items]
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 404
    except Exception:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="get-shopping-cart">Get Shopping Cart</h2>
<p>tags: [Shopping Cart]
description: Retrieves all items currently in the customer's shopping cart; returns an empty list if the cart is empty.
parameters:
- in: path
name: customer_id
type: integer
required: true
description: The ID of the customer user.
responses:
200:
description: Cart items retrieved successfully
schema:
type: object
properties:
items:
type: array
items: {$ref: '#/definitions/CartItemDetails'}</p></div>
</dd>
<dt id="routes.customer_routes.get_customer"><code class="name flex">
<span>def <span class="ident">get_customer</span></span>(<span>user_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:user_id&gt;&#39;, methods=[&#39;GET&#39;])
def get_customer(user_id):
    &#34;&#34;&#34;
    Get Customer Profile
    ---
    tags: [Customer Management]
    description: Retrieves the basic customer profile details by user ID.
    parameters:
      - in: path
        name: user_id
        type: integer
        required: true
        description: The ID of the customer user.
    responses:
      200:
        description: Customer profile retrieved successfully
        schema: {$ref: &#39;#/definitions/CustomerProfile&#39;}
      404: {description: Customer not found}
    &#34;&#34;&#34;
    try:
        customer = customer_service.get_customer(user_id=user_id)
        return jsonify({
            &#39;user_id&#39;: customer.user_id,
            &#39;default_theatre_id&#39;: customer.default_theatre_id
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 404
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="get-customer-profile">Get Customer Profile</h2>
<p>tags: [Customer Management]
description: Retrieves the basic customer profile details by user ID.
parameters:
- in: path
name: user_id
type: integer
required: true
description: The ID of the customer user.
responses:
200:
description: Customer profile retrieved successfully
schema: {$ref: '#/definitions/CustomerProfile'}
404: {description: Customer not found}</p></div>
</dd>
<dt id="routes.customer_routes.get_customer_showing"><code class="name flex">
<span>def <span class="ident">get_customer_showing</span></span>(<span>user_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:user_id&gt;/customer_showing&#39;, methods=[&#39;GET&#39;])
def get_customer_showing(user_id):
    &#34;&#34;&#34;
    Get Customer Showing ID
    ---
    tags: [Movie Booking]
    description: Retrieves the first customer_showing id for the specified customer.
    parameters:
      - in: path
        name: user_id
        type: integer
        required: true
        description: The ID of the customer user.
    responses:
      200:
        description: Customer showing ID retrieved successfully
        schema:
          type: object
          properties:
            id: {type: integer}
      400:
        description: Invalid input or no showing found for the customer
      500:
        description: Server error while retrieving the showing ID
    &#34;&#34;&#34;
    try:
        customer_showing = customer_service.get_customer_showing_id(user_id)
        return jsonify(customer_showing), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="get-customer-showing-id">Get Customer Showing Id</h2>
<p>tags: [Movie Booking]
description: Retrieves the first customer_showing id for the specified customer.
parameters:
- in: path
name: user_id
type: integer
required: true
description: The ID of the customer user.
responses:
200:
description: Customer showing ID retrieved successfully
schema:
type: object
properties:
id: {type: integer}
400:
description: Invalid input or no showing found for the customer
500:
description: Server error while retrieving the showing ID</p></div>
</dd>
<dt id="routes.customer_routes.get_deliveries_for_customer"><code class="name flex">
<span>def <span class="ident">get_deliveries_for_customer</span></span>(<span>user_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:user_id&gt;/deliveries&#39;, methods=[&#39;GET&#39;])
def get_deliveries_for_customer(user_id):
    &#34;&#34;&#34;
    Get Customer Delivery History
    ---
    tags: [Delivery Operations (Customer)]
    description: Retrieves a list of all delivery orders associated with the customer.
    parameters:
      - in: path
        name: user_id
        type: integer
        required: true
        description: The ID of the customer user.
    responses:
      200:
        description: Deliveries retrieved successfully
        schema:
          type: object
          properties:
            deliveries:
              type: array
              items: {$ref: &#39;#/definitions/DeliveryDetails&#39;}
      404: {description: Customer not found}
    &#34;&#34;&#34;
    try:
        deliveries = customer_service.get_all_deliveries(user_id=user_id)
        return jsonify({
            &#39;deliveries&#39;: [{
                &#39;id&#39;: d.id,
                &#39;customer_showing_id&#39;: d.customer_showing_id,
                &#39;payment_method_id&#39;: d.payment_method_id,
                &#39;driver_id&#39;: d.driver_id,
                &#39;staff_id&#39;: d.staff_id,
                &#39;total_price&#39;: float(d.total_price),
                &#39;payment_status&#39;: d.payment_status,
                &#39;delivery_status&#39;: d.delivery_status
            } for d in deliveries]
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 404
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="get-customer-delivery-history">Get Customer Delivery History</h2>
<p>tags: [Delivery Operations (Customer)]
description: Retrieves a list of all delivery orders associated with the customer.
parameters:
- in: path
name: user_id
type: integer
required: true
description: The ID of the customer user.
responses:
200:
description: Deliveries retrieved successfully
schema:
type: object
properties:
deliveries:
type: array
items: {$ref: '#/definitions/DeliveryDetails'}
404: {description: Customer not found}</p></div>
</dd>
<dt id="routes.customer_routes.get_delivery_details"><code class="name flex">
<span>def <span class="ident">get_delivery_details</span></span>(<span>delivery_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/deliveries/&lt;int:delivery_id&gt;/details&#39;, methods=[&#39;GET&#39;])
def get_delivery_details(delivery_id):
    &#34;&#34;&#34;
    Get Delivery Details
    ---
    summary: Get Delivery Details
    tags: [Delivery Operations (Customer)]
    description: Retrieves delivery details including items, theatre information, and movie title for the given delivery.
    parameters:
      - in: path
        name: delivery_id
        type: integer
        required: true
        description: The ID of the delivery to fetch.
    responses:
      200:
        description: Delivery details retrieved
        schema:
          type: object
          properties:
            id: {type: integer}
            driver_id: {type: integer, nullable: true}
            total_price: {type: number, format: float}
            delivery_time: {type: string, nullable: true, description: ISO 8601 datetime}
            delivery_status: {type: string}
            items:
              type: array
              items:
                type: object
                properties:
                  name: {type: string, nullable: true}
                  quantity: {type: integer}
            theatre_name: {type: string, nullable: true}
            theatre_address: {type: string, nullable: true}
            movie_title: {type: string, nullable: true}
      404:
        description: Delivery not found
    &#34;&#34;&#34;
    try:
        details = customer_service.get_delivery_details(delivery_id=delivery_id)
        return jsonify(details), 200
    except ValueError as e:
        return jsonify({&#34;error&#34;: str(e)}), 404
    except Exception as e:
        return jsonify({&#34;error&#34;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="get-delivery-details">Get Delivery Details</h2>
<p>summary: Get Delivery Details
tags: [Delivery Operations (Customer)]
description: Retrieves delivery details including items, theatre information, and movie title for the given delivery.
parameters:
- in: path
name: delivery_id
type: integer
required: true
description: The ID of the delivery to fetch.
responses:
200:
description: Delivery details retrieved
schema:
type: object
properties:
id: {type: integer}
driver_id: {type: integer, nullable: true}
total_price: {type: number, format: float}
delivery_time: {type: string, nullable: true, description: ISO 8601 datetime}
delivery_status: {type: string}
items:
type: array
items:
type: object
properties:
name: {type: string, nullable: true}
quantity: {type: integer}
theatre_name: {type: string, nullable: true}
theatre_address: {type: string, nullable: true}
movie_title: {type: string, nullable: true}
404:
description: Delivery not found</p></div>
</dd>
<dt id="routes.customer_routes.get_payment_methods"><code class="name flex">
<span>def <span class="ident">get_payment_methods</span></span>(<span>customer_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:customer_id&gt;/payment-methods&#39;, methods=[&#39;GET&#39;])
def get_payment_methods(customer_id):
    &#34;&#34;&#34;
    Get Customer Payment Methods
    ---
    tags: [Payment Methods]
    description: Retrieves all saved payment methods for a customer; returns an empty list if none are saved.
    parameters:
      - in: path
        name: customer_id
        type: integer
        required: true
        description: The ID of the customer user.
    responses:
      200:
        description: Payment methods retrieved
        schema:
          type: object
          properties:
            payment_methods:
              type: array
              items: {$ref: &#39;#/definitions/PaymentMethodDetails&#39;}
    &#34;&#34;&#34;
    try:
        payment_methods = customer_service.get_customer_payment_methods(customer_id=customer_id)
        return jsonify({
            &#39;payment_methods&#39;: [{
                &#39;id&#39;: pm.id,
                &#39;card_number&#39;: pm.card_number,
                &#39;expiration_month&#39;: pm.expiration_month,
                &#39;expiration_year&#39;: pm.expiration_year,
                &#39;balance&#39;: float(pm.balance),
                &#39;is_default&#39;: pm.is_default,
                &#39;billing_address&#39;: pm.billing_address
            } for pm in payment_methods]
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 404
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="get-customer-payment-methods">Get Customer Payment Methods</h2>
<p>tags: [Payment Methods]
description: Retrieves all saved payment methods for a customer; returns an empty list if none are saved.
parameters:
- in: path
name: customer_id
type: integer
required: true
description: The ID of the customer user.
responses:
200:
description: Payment methods retrieved
schema:
type: object
properties:
payment_methods:
type: array
items: {$ref: '#/definitions/PaymentMethodDetails'}</p></div>
</dd>
<dt id="routes.customer_routes.get_showings_for_customer"><code class="name flex">
<span>def <span class="ident">get_showings_for_customer</span></span>(<span>user_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:user_id&gt;/showings&#39;, methods=[&#39;GET&#39;])
def get_showings_for_customer(user_id):
    &#34;&#34;&#34;
    List Customer Showings
    ---
    summary: List Customer Showings
    tags: [Movie Booking]
    description: Retrieves all showings for a customer, including movie title, seat (e.g., &#34;A 10&#34;), start time, auditorium label (e.g., &#34;Auditorium 2&#34;), and theatre name.
    parameters:
      - in: path
        name: user_id
        type: integer
        required: true
        description: The ID of the customer user.
    responses:
      200:
        description: Showings retrieved
        schema:
          type: object
          properties:
            showings:
              type: array
              items:
                type: object
                properties:
                  id: {type: integer}
                  movie_title: {type: string}
                  seat: {type: string, nullable: true}
                  start_time: {type: string, description: ISO 8601 datetime}
                  auditorium: {type: string, nullable: true}
                  theatre_name: {type: string}
      404:
        description: Customer not found
    &#34;&#34;&#34;
    try:
      showings = customer_service.get_all_showings(user_id=user_id)
      return jsonify({
          &#34;showings&#34;: [{
              &#34;id&#34;: s[&#34;id&#34;],
              &#34;movie_title&#34;: s[&#34;movie_title&#34;],
              &#34;seat&#34;: s[&#34;seat&#34;],               
              &#34;start_time&#34;: s[&#34;start_time&#34;],    
              &#34;auditorium&#34;: s[&#34;auditorium&#34;],   
              &#34;theatre_name&#34;: s[&#34;theatre_name&#34;],
            } for s in showings]
        }), 200
    except ValueError as e:
        return jsonify({&#34;error&#34;: str(e)}), 404
    except Exception as e:
        return jsonify({&#34;error&#34;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="list-customer-showings">List Customer Showings</h2>
<p>summary: List Customer Showings
tags: [Movie Booking]
description: Retrieves all showings for a customer, including movie title, seat (e.g., "A 10"), start time, auditorium label (e.g., "Auditorium 2"), and theatre name.
parameters:
- in: path
name: user_id
type: integer
required: true
description: The ID of the customer user.
responses:
200:
description: Showings retrieved
schema:
type: object
properties:
showings:
type: array
items:
type: object
properties:
id: {type: integer}
movie_title: {type: string}
seat: {type: string, nullable: true}
start_time: {type: string, description: ISO 8601 datetime}
auditorium: {type: string, nullable: true}
theatre_name: {type: string}
404:
description: Customer not found</p></div>
</dd>
<dt id="routes.customer_routes.list_products"><code class="name flex">
<span>def <span class="ident">list_products</span></span>(<span>)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/products/menu&#39;, methods=[&#39;GET&#39;])
def list_products():
    &#34;&#34;&#34;
    List Available Menu Products
    ---
    tags: [Product Catalog]
    description: Retrieves a list of all currently available concession products (the menu).
    responses:
      200:
        description: Products retrieved successfully
        schema:
          type: object
          properties:
            products:
              type: array
              items: {$ref: &#39;#/definitions/ProductMenu&#39;}
    &#34;&#34;&#34;
    try:
        products = customer_service.show_all_products()
        return jsonify({
            &#39;products&#39;: [{
                &#39;id&#39;: p.id,
                &#39;supplier_id&#39;: p.supplier_id,
                &#39;name&#39;: p.name,
                &#39;unit_price&#39;: float(p.unit_price),
                &#39;inventory_quantity&#39;: p.inventory_quantity,
                &#39;category&#39;: p.category,
                &#39;is_available&#39;: p.is_available
            } for p in products]
        }), 200
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="list-available-menu-products">List Available Menu Products</h2>
<p>tags: [Product Catalog]
description: Retrieves a list of all currently available concession products (the menu).
responses:
200:
description: Products retrieved successfully
schema:
type: object
properties:
products:
type: array
items: {$ref: '#/definitions/ProductMenu'}</p></div>
</dd>
<dt id="routes.customer_routes.rate_delivery"><code class="name flex">
<span>def <span class="ident">rate_delivery</span></span>(<span>delivery_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/deliveries/&lt;int:delivery_id&gt;/rate&#39;, methods=[&#39;POST&#39;])
def rate_delivery(delivery_id):
    &#34;&#34;&#34;
    Rate Delivery
    ---
    tags: [Delivery Operations (Customer)]
    description: Rates a fulfilled delivery order (rating applies to the service/order).
    parameters:
      - in: path
        name: delivery_id
        type: integer
        required: true
        description: The ID of the delivery to rate.
      - in: body
        name: rating_value
        schema: {$ref: &#39;#/definitions/DeliveryRateCustomer&#39;}
    responses:
      200:
        description: Delivery rated
        schema:
          type: object
          properties:
            message: {type: string}
            delivery_id: {type: integer}
      400: {description: Invalid rating or delivery status is not fulfilled}
      404: {description: Delivery not found}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        rating = data.get(&#39;rating&#39;)
        delivery = customer_service.rate_delivery(delivery_id=delivery_id, rating=rating)
        return jsonify({
            &#39;message&#39;: &#39;Delivery rated&#39;,
            &#39;delivery_id&#39;: delivery.id
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="rate-delivery">Rate Delivery</h2>
<p>tags: [Delivery Operations (Customer)]
description: Rates a fulfilled delivery order (rating applies to the service/order).
parameters:
- in: path
name: delivery_id
type: integer
required: true
description: The ID of the delivery to rate.
- in: body
name: rating_value
schema: {$ref: '#/definitions/DeliveryRateCustomer'}
responses:
200:
description: Delivery rated
schema:
type: object
properties:
message: {type: string}
delivery_id: {type: integer}
400: {description: Invalid rating or delivery status is not fulfilled}
404: {description: Delivery not found}</p></div>
</dd>
<dt id="routes.customer_routes.update_cart_item"><code class="name flex">
<span>def <span class="ident">update_cart_item</span></span>(<span>cart_item_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/cart/&lt;int:cart_item_id&gt;&#39;, methods=[&#39;PUT&#39;])
def update_cart_item(cart_item_id):
    &#34;&#34;&#34;
    Update Cart Item Quantity
    ---
    tags: [Shopping Cart]
    description: Updates the quantity of a specific item in the cart.
    parameters:
      - in: path
        name: cart_item_id
        type: integer
        required: true
        description: The ID of the cart item to update.
      - in: body
        name: quantity_update
        schema: {$ref: &#39;#/definitions/CartItemUpdate&#39;}
    responses:
      200:
        description: Cart item updated
        schema:
          type: object
          properties:
            message: {type: string}
            cart_item_id: {type: integer}
            new_quantity: {type: integer}
      400: {description: Invalid quantity}
      404: {description: Cart item not found}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        quantity = data.get(&#39;quantity&#39;)
        
        cart_item = customer_service.update_cart_item(cart_item_id, quantity)
        return jsonify({
            &#39;message&#39;: &#39;Cart item updated&#39;,
            &#39;cart_item_id&#39;: cart_item.id,
            &#39;new_quantity&#39;: cart_item.quantity
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="update-cart-item-quantity">Update Cart Item Quantity</h2>
<p>tags: [Shopping Cart]
description: Updates the quantity of a specific item in the cart.
parameters:
- in: path
name: cart_item_id
type: integer
required: true
description: The ID of the cart item to update.
- in: body
name: quantity_update
schema: {$ref: '#/definitions/CartItemUpdate'}
responses:
200:
description: Cart item updated
schema:
type: object
properties:
message: {type: string}
cart_item_id: {type: integer}
new_quantity: {type: integer}
400: {description: Invalid quantity}
404: {description: Cart item not found}</p></div>
</dd>
<dt id="routes.customer_routes.update_default_theatre"><code class="name flex">
<span>def <span class="ident">update_default_theatre</span></span>(<span>user_id)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@customer_bp.route(&#39;/customers/&lt;int:user_id&gt;/theatre&#39;, methods=[&#39;PUT&#39;])
def update_default_theatre(user_id):
    &#34;&#34;&#34;
    Update Default Theatre
    ---
    tags: [Customer Management]
    description: Updates the customer&#39;s default theatre ID.
    parameters:
      - in: path
        name: user_id
        type: integer
        required: true
        description: The ID of the customer user.
      - in: body
        name: theatre_update
        schema: {$ref: &#39;#/definitions/TheatreUpdate&#39;}
    responses:
      200:
        description: Default theatre updated
        schema:
          type: object
          properties:
            message: {type: string}
            customer: {$ref: &#39;#/definitions/CustomerProfile&#39;}
      400: {description: Invalid input}
    &#34;&#34;&#34;
    try:
        data = request.get_json()
        new_theatre_id = data.get(&#39;theatre_id&#39;)
        customer = customer_service.update_default_theatre(user_id=user_id, new_theatre_id=new_theatre_id)
        return jsonify({
            &#39;message&#39;: &#39;Default theatre updated&#39;,
            &#39;customer&#39;: {
                &#39;user_id&#39;: customer.user_id,
                &#39;default_theatre_id&#39;: customer.default_theatre_id
            }
        }), 200
    except ValueError as e:
        return jsonify({&#39;error&#39;: str(e)}), 400
    except Exception as e:
        return jsonify({&#39;error&#39;: str(e)}), 500</code></pre>
</details>
<div class="desc"><h2 id="update-default-theatre">Update Default Theatre</h2>
<p>tags: [Customer Management]
description: Updates the customer's default theatre ID.
parameters:
- in: path
name: user_id
type: integer
required: true
description: The ID of the customer user.
- in: body
name: theatre_update
schema: {$ref: '#/definitions/TheatreUpdate'}
responses:
200:
description: Default theatre updated
schema:
type: object
properties:
message: {type: string}
customer: {$ref: '#/definitions/CustomerProfile'}
400: {description: Invalid input}</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="routes" href="index.html">routes</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="routes.customer_routes.add_funds" href="#routes.customer_routes.add_funds">add_funds</a></code></li>
<li><code><a title="routes.customer_routes.add_payment_method" href="#routes.customer_routes.add_payment_method">add_payment_method</a></code></li>
<li><code><a title="routes.customer_routes.add_to_cart" href="#routes.customer_routes.add_to_cart">add_to_cart</a></code></li>
<li><code><a title="routes.customer_routes.cancel_delivery" href="#routes.customer_routes.cancel_delivery">cancel_delivery</a></code></li>
<li><code><a title="routes.customer_routes.create_customer" href="#routes.customer_routes.create_customer">create_customer</a></code></li>
<li><code><a title="routes.customer_routes.create_customer_showing" href="#routes.customer_routes.create_customer_showing">create_customer_showing</a></code></li>
<li><code><a title="routes.customer_routes.create_delivery" href="#routes.customer_routes.create_delivery">create_delivery</a></code></li>
<li><code><a title="routes.customer_routes.delete_cart_item" href="#routes.customer_routes.delete_cart_item">delete_cart_item</a></code></li>
<li><code><a title="routes.customer_routes.delete_customer" href="#routes.customer_routes.delete_customer">delete_customer</a></code></li>
<li><code><a title="routes.customer_routes.delete_payment_method" href="#routes.customer_routes.delete_payment_method">delete_payment_method</a></code></li>
<li><code><a title="routes.customer_routes.get_cart" href="#routes.customer_routes.get_cart">get_cart</a></code></li>
<li><code><a title="routes.customer_routes.get_customer" href="#routes.customer_routes.get_customer">get_customer</a></code></li>
<li><code><a title="routes.customer_routes.get_customer_showing" href="#routes.customer_routes.get_customer_showing">get_customer_showing</a></code></li>
<li><code><a title="routes.customer_routes.get_deliveries_for_customer" href="#routes.customer_routes.get_deliveries_for_customer">get_deliveries_for_customer</a></code></li>
<li><code><a title="routes.customer_routes.get_delivery_details" href="#routes.customer_routes.get_delivery_details">get_delivery_details</a></code></li>
<li><code><a title="routes.customer_routes.get_payment_methods" href="#routes.customer_routes.get_payment_methods">get_payment_methods</a></code></li>
<li><code><a title="routes.customer_routes.get_showings_for_customer" href="#routes.customer_routes.get_showings_for_customer">get_showings_for_customer</a></code></li>
<li><code><a title="routes.customer_routes.list_products" href="#routes.customer_routes.list_products">list_products</a></code></li>
<li><code><a title="routes.customer_routes.rate_delivery" href="#routes.customer_routes.rate_delivery">rate_delivery</a></code></li>
<li><code><a title="routes.customer_routes.update_cart_item" href="#routes.customer_routes.update_cart_item">update_cart_item</a></code></li>
<li><code><a title="routes.customer_routes.update_default_theatre" href="#routes.customer_routes.update_default_theatre">update_default_theatre</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
